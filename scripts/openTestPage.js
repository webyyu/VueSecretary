/**
 * 打开反馈API测试页面
 */

import { exec } from 'child_process';
import { fileURLToPath } from 'url';
import { dirname, resolve } from 'path';
import { platform } from 'os';

// 获取当前文件目录
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// 测试页面路径
const testPage = resolve(__dirname, '../test/feedbackTest.html');
const testPageUrl = `file://${testPage}`;

// 根据不同操作系统打开浏览器
function openBrowser(url) {
  const cmd = {
    win32: `start ${url}`,
    darwin: `open ${url}`,
    linux: `xdg-open ${url}`
  }[platform()];

  if (!cmd) {
    console.error('不支持的操作系统');
    return;
  }

  exec(cmd, (err) => {
    if (err) {
      console.error('打开浏览器失败:', err);
      return;
    }
    console.log(`已在浏览器中打开测试页面: ${url}`);
  });
}

// 打开测试页面
console.log('正在打开反馈API测试页面...');
openBrowser(testPageUrl); 